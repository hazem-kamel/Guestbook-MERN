(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,a,t){},130:function(e,a){},133:function(e,a,t){},136:function(e,a,t){},137:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(14),c=t.n(r),o=t(27),i=t(16),l=(t(75),function(e){var a=sessionStorage.getItem("storedSession");return console.log(a),a&&e.history.push("/dashboard"),s.a.createElement("div",{className:"home"},s.a.createElement("h3",null,"Guestbook"),s.a.createElement("p",null,"Contact and Chat with your friends with the best live chat app "),s.a.createElement("p",null," < / >"),s.a.createElement("div",{className:"buttons"},s.a.createElement("a",{href:"/login"},s.a.createElement("button",null,"Login")),s.a.createElement("a",{href:"/register"},s.a.createElement("button",null,"Register"))))}),m=t(12),u=t.n(m);var d=t(28),p=(t(93),t(11)),h=t(15),f=Object(p.b)((function(e){return{session:e.Session}}),(function(e){return{login:function(a){return e(function(e){return function(a){u.a.post("/api/login",{username:e.username,password:e.password},{headers:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,crossdomain:!0}).then((function(e){a({type:"Login",payload:e.data})}))}}(a))}}}))((function(e){Object(n.useEffect)((function(){m()}),[e.session]);var a=Object(i.f)(),t=Object(h.d)(),r=Object(d.a)(),c=r.handleSubmit,o=r.register,l=r.errors,m=function(){e.session.user?(console.log(e.session),sessionStorage.setItem("storedSession",e.session.user.username),a.push("/dashboard")):e.session.error&&t.show(s.a.createElement("div",{style:{size:"10px"}},e.session.error))};return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login-form"},s.a.createElement("h3",{className:"title"},"Sign In"),s.a.createElement("form",{onSubmit:c((function(a){var t={username:a.username.toUpperCase(),password:a.password};e.login(t)}))},s.a.createElement("input",{type:"text",placeholder:"Enter your username",name:"username",id:"username",ref:o({required:!0})}),l.username&&"required"===l.username.type&&s.a.createElement("p",{className:"error-before-submit"},"This is required"),s.a.createElement("input",{id:"password",placeholder:"Enter your password",name:"password",type:"password",ref:o({required:!0})}),l.password&&"required"===l.password.type&&s.a.createElement("p",{className:"error-before-submit"},"This is required"),s.a.createElement("input",{className:"btn",type:"submit",ref:o({required:!0})}),s.a.createElement("a",{href:"/register",className:"register-link"},"Create an account"))))})),g=(t(99),Object(p.b)((function(e){return{session:e.Session}}),(function(e){return{register:function(a){return e((t=a,function(e){u.a.post("/api/register",{username:t.username,password:t.password,gender:t.gender},{withCredentials:!0,crossdomain:!0}).then((function(a){e({type:"Register",payload:a.data})})).catch((function(e){console.log("Cant Register ",e)}))}));var t}}}))((function(e){Object(n.useEffect)((function(){m()}),[e.session]);var a=Object(h.d)(),t=Object(i.f)(),r=Object(d.a)(),c=r.handleSubmit,o=r.register,l=r.errors,m=function(){e.session.user?(sessionStorage.setItem("storedSession",e.session.user.username),t.push("/dashboard")):e.session.error&&a.show(s.a.createElement("div",{style:{size:"10px"}},e.session.error))};return s.a.createElement("div",{className:"register"},s.a.createElement("div",{className:"register-form"},s.a.createElement("h3",{className:"title"},"Register"),s.a.createElement("form",{onSubmit:c((function(a){var t={username:a.username.toUpperCase(),password:a.password,gender:a.gender};e.register(t)}))},s.a.createElement("input",{id:"username",name:"username",placeholder:"Type your username",ref:o({required:!0,minLength:3,maxLength:10})}),l.username&&"required"===l.username.type&&s.a.createElement("p",{className:"error-before-submit"},"This is required"),l.username&&"minLength"===l.username.type&&s.a.createElement("p",{className:"error-before-submit"},"Minimum length is 3"),l.username&&"maxLength"===l.username.type&&s.a.createElement("p",{className:"error-before-submit"},"Maximum length is 10"),s.a.createElement("input",{id:"password",name:"password",placeholder:"Type your password",type:"password",ref:o({required:!0})}),l.password&&"required"===l.password.type&&s.a.createElement("p",{className:"error-before-submit"},"This is required"),s.a.createElement("label",{className:"label-gender",htmlFor:"gender"},"Gender"),s.a.createElement("input",{name:"gender",ref:o({required:!0}),list:"list"}),l.gender&&s.a.createElement("p",{className:"error-before-submit"},"This is required"),s.a.createElement("datalist",{id:"list"},s.a.createElement("option",{value:"Male"}),s.a.createElement("option",{value:"Female"})),s.a.createElement("input",{type:"submit",className:"btn",ref:o({required:!0})}),s.a.createElement("a",{href:"/login",className:"login-link"},"Already have an account"))))}))),E=t(6),b=(t(100),Object(p.b)((function(e){return{user:e.Session}}))((function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)([]),i=Object(E.a)(o,2),l=i[0],m=i[1],d=sessionStorage.getItem("storedSession"),p=d;console.log(d),d||e.history.push("/"),Object(n.useEffect)((function(){u.a.get("/friends",{username:p}).then((function(e){m(e.data)})).catch((function(e){console.log("Cant fetch friends ",e)}))}));return s.a.createElement("div",{className:"dash"},s.a.createElement("div",{className:"logout",onClick:function(e){sessionStorage.clear()}},s.a.createElement("h4",null,"Sign Out")),s.a.createElement("div",{className:"friends-dashboard-container"},s.a.createElement("p",{className:"chatsp"},"Chats"),"No Friends"!==l?l.map((function(a,t){return s.a.createElement("div",{id:t,className:"dashboard-friend-box ",onClick:function(t){e.history.push("/Chat/".concat(a))}},s.a.createElement("img",{className:"friendAvatar",src:"https://www.pngitem.com/pimgs/m/78-786293_1240-x-1240-0-avatar-profile-icon-png.png",alt:"Avatar"}),s.a.createElement("div",{className:"dashboard-text"},s.a.createElement("p",{className:"dashboard-friendName"},a)))})):s.a.createElement("p",{className:"noFriends"},"You have no friends")),s.a.createElement("div",{className:"welcome-message"},s.a.createElement("h3",null,"Welcome ",d),s.a.createElement("h3",null,"Live Chat Now With Your Friends")),s.a.createElement("div",{className:"new-user"},s.a.createElement("input",{className:"friend-name",onChange:function(e){return c(e.target.value)},type:"text",placeholder:"type your friend's username"}),s.a.createElement("button",{className:"chat-button",onClick:function(a){!function(a){u.a.post("/api/check",{username:a.toUpperCase()},{withCredentials:!0,crossdomain:!0}).then((function(a){a.data.error?alert(a.data.error):(e.history.push("/Chat/".concat(a.data)),console.log(a.data))})).catch((function(e){console.log(e)}))}(r)}},"Chat")))}))),N=t(67),v=t.n(N),w=(t(133),t(29)),y=t(30),C=v()(),O=Object(p.b)((function(e){return{}}),(function(e){return{}}))((function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)([]),i=Object(E.a)(o,2),l=i[0],m=i[1],d=e.match.params.friend,p=sessionStorage.getItem("storedSession"),h=p;p||e.history.push("/"),Object(n.useEffect)((function(){u.a.post("/chat",{username:h,friend:d}).then((function(e){m(e.data)})).catch((function(e){console.log("Cant fetch Chat ",e)}))}),[e.history.location.pathname,l]);return s.a.createElement("div",{className:""},s.a.createElement("div",{className:"settings"},s.a.createElement("div",{className:"logout",onClick:function(e){sessionStorage.clear()}},s.a.createElement(w.a,{className:"logout-button",icon:y.c})," "),s.a.createElement("div",{className:"Chats"},s.a.createElement("a",{href:"/dashboard"},s.a.createElement(w.a,{className:"back",icon:y.a})))),s.a.createElement("div",{className:"chatWindow"},s.a.createElement("div",{className:"chats-container"},s.a.createElement("div",{className:"chat-window"},s.a.createElement("div",{className:"chat-header"},s.a.createElement("img",{src:"https://www.pngitem.com/pimgs/m/78-786293_1240-x-1240-0-avatar-profile-icon-png.png",alt:"avatar"}),s.a.createElement("div",{className:"friend-name"},d)),s.a.createElement("div",{className:"chat-history"},s.a.createElement("ul",{className:"chat-ul-history"},l.map((function(e,a){return s.a.createElement("li",{id:"messages",className:"message-list",key:a},e.sender===h?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"message-data align-right"},s.a.createElement("span",{className:"message-data-time"},e.dateCreated),s.a.createElement("span",{className:"message-data-name"},e.sender)),s.a.createElement("div",{className:"message other-message float-right"},e.message)):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"message-data"},s.a.createElement("span",{className:"message-data-name"},s.a.createElement("i",{className:"fa fa-circle online"}),e.sender),s.a.createElement("span",{className:"message-data-time"},e.dateCreated)),s.a.createElement("div",{className:"message my-message"},e.message)))})))),s.a.createElement("div",{className:"send-message"},s.a.createElement("textarea",{className:"message-to-send",id:"message-to-send",placeholder:"Type your message",rows:"3",onChange:function(e){c(e.target.value)}}),s.a.createElement(w.a,{onClick:function(){return e={user:h,friend:d,message:r},document.getElementById("message-to-send").value="",C.on("newmessage",(function(e){!function(e){document.getElementById("messages").append(s.a.createElement("p",null,e.message))}(e)})),void u.a.post("/messages",{username:e.user,friend:e.friend,message:e.message},{withCredentials:!0,crossdomain:!0}).then((function(e){})).catch((function(e){console.log("Cant Register ",e)}));var e},className:"send-button",icon:y.b}))))))})),S=function(){return s.a.createElement(o.a,null,s.a.createElement(i.c,null,s.a.createElement(i.a,{exact:!0,path:"/",component:l}),s.a.createElement(i.a,{exact:!0,path:"/login",component:f}),s.a.createElement(i.a,{exact:!0,path:"/register",component:g}),s.a.createElement(i.a,{exact:!0,path:"/dashboard",component:b}),s.a.createElement(i.a,{exact:!0,path:"/Chat/:friend",component:O})))};var j=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(S,null))},x=t(22),q=t(41),k={Session:{}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"Register":case"Login":return Object(q.a)({},e,{Session:a.payload});default:return e}},I=t(68),F=Object(x.c)(T,Object(x.a)(I.a)),L=t(69),A=(t(136),{position:h.b.BOTTOM_CENTER,timeout:2e3,offset:"10px",transition:h.c.FADE});c.a.render(s.a.createElement(p.a,{store:F},s.a.createElement(h.a,Object.assign({template:L.a},A),s.a.createElement(j,null))),document.getElementById("root"))},70:function(e,a,t){e.exports=t(137)},75:function(e,a,t){},93:function(e,a,t){},99:function(e,a,t){}},[[70,1,2]]]);
//# sourceMappingURL=main.42a15d6f.chunk.js.map